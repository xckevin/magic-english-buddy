# Magic English Buddy 测试用例文档

> 📋 文档版本: v1.0  
> 📅 创建日期: 2025-12-27  
> 🎯 目的: 验收 Magic English Buddy 应用的完整功能

---

## 目录

1. [测试环境与准备](#1-测试环境与准备)
2. [新手引导模块测试](#2-新手引导模块测试)
3. [迷雾地图模块测试](#3-迷雾地图模块测试)
4. [阅读器模块测试](#4-阅读器模块测试)
5. [Quiz 练习系统测试](#5-quiz-练习系统测试)
6. [Buddy 养成系统测试](#6-buddy-养成系统测试)
7. [激励系统测试](#7-激励系统测试)
8. [守护者卷轴测试](#8-守护者卷轴测试)
9. [离线功能测试](#9-离线功能测试)
10. [性能测试](#10-性能测试)
11. [兼容性测试](#11-兼容性测试)
12. [安全与边界测试](#12-安全与边界测试)
13. [回归测试清单](#13-回归测试清单)

---

## 1. 测试环境与准备

### 1.1 测试环境要求

| 环境类型 | 配置要求 |
|---------|---------|
| **开发环境** | Chrome 80+, localhost:5173 |
| **测试设备 A** | 高端设备 - Chrome/Safari 最新版, 4GB+ RAM |
| **测试设备 B** | 低端设备 - Android 5.0+, 2GB RAM |
| **网络环境** | 在线/离线/弱网 (3G) |

### 1.2 测试数据准备

| 数据类型 | 准备内容 |
|---------|---------|
| 测试用户 | 新用户(首次打开)、老用户(有历史数据) |
| 故事数据 | L1 故事 10+ 个 |
| 词典数据 | 基础词典 60+ 词 |
| 清空数据 | 清除 IndexedDB 方法: 开发者工具 → Application → Storage → Clear site data |

### 1.3 测试账号状态

```
状态 A: 首次使用 (无任何数据)
状态 B: 已完成引导 (有 Buddy 名称)
状态 C: 学习中途 (有阅读/Quiz 记录)
状态 D: 高级用户 (多个成就/卡牌)
```

---

## 2. 新手引导模块测试

### 2.1 引导页展示

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| OB-001 | 首次启动展示引导页 | 1. 清除所有数据<br>2. 打开应用 | 显示魔法星空背景和魔法蛋 | P0 | ⬜ |
| OB-002 | 星空背景动画效果 | 1. 进入引导页<br>2. 观察背景 | 星星有呼吸闪烁效果，流星划过 | P1 | ⬜ |
| OB-003 | 魔法蛋悬浮动画 | 1. 进入引导页<br>2. 观察蛋动画 | 蛋有上下浮动效果，发光脉冲 | P0 | ⬜ |
| OB-004 | 引导文字显示 | 1. 进入引导页 | 显示 "Touch and hold to awaken your buddy!" | P0 | ⬜ |

### 2.2 魔法蛋交互

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| OB-005 | 短按蛋无反应 | 1. 点击蛋(少于 500ms) | 蛋晃动但不破碎，提示需要长按 | P1 | ⬜ |
| OB-006 | 长按蛋孵化 | 1. 长按蛋 2 秒以上 | 触发孵化动画，蛋壳裂开 | P0 | ⬜ |
| OB-007 | 孵化震动反馈 | 1. 长按蛋触发孵化<br>2. 观察设备震动 | 设备产生震动反馈 (如支持) | P2 | ⬜ |
| OB-008 | 孵化动画完整性 | 1. 触发孵化<br>2. 观察完整动画 | 动画阶段: 裂纹 → 破碎 → Buddy 出现 | P0 | ⬜ |
| OB-009 | 孵化粒子效果 | 1. 触发孵化 | 有魔法粒子飞散效果 | P1 | ⬜ |

### 2.3 Buddy 起名流程

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| OB-010 | 起名界面弹出 | 1. 完成孵化动画 | 弹出起名输入框 | P0 | ⬜ |
| OB-011 | 输入有效名字 | 1. 输入 "Spark"<br>2. 点击确认 | 成功保存，进入地图页 | P0 | ⬜ |
| OB-012 | 名字长度限制 | 1. 输入超过 20 字符的名字 | 限制最大长度，显示字符计数 | P1 | ⬜ |
| OB-013 | 空名字提交 | 1. 不输入任何内容<br>2. 点击确认 | 提示必须输入名字 | P0 | ⬜ |
| OB-014 | 特殊字符处理 | 1. 输入 "<script>alert(1)</script>" | 特殊字符被过滤或转义 | P1 | ⬜ |
| OB-015 | 纯空格名字 | 1. 输入多个空格<br>2. 点击确认 | 提示名字无效 | P1 | ⬜ |

### 2.4 引导状态持久化

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| OB-016 | 引导完成后直接进地图 | 1. 完成引导<br>2. 刷新页面 | 直接进入地图页，不再显示引导 | P0 | ⬜ |
| OB-017 | 引导中途退出恢复 | 1. 长按蛋触发孵化<br>2. 刷新页面 | 重新从引导页开始 | P1 | ⬜ |
| OB-018 | IndexedDB 用户数据 | 1. 完成引导<br>2. 检查 IndexedDB | users 表有用户记录，包含 buddyName | P0 | ⬜ |

---

## 3. 迷雾地图模块测试

### 3.1 地图基础展示

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| MP-001 | 地图页面加载 | 1. 进入地图页 | 显示 L1 萌芽之森地图背景 | P0 | ⬜ |
| MP-002 | 节点显示 | 1. 进入地图<br>2. 查看节点 | 显示 20 个故事节点 | P0 | ⬜ |
| MP-003 | 迷雾效果 | 1. 新用户进入地图 | 未解锁区域被迷雾覆盖，灰度+模糊 | P0 | ⬜ |
| MP-004 | 首个节点可用 | 1. 新用户进入地图 | 第一个节点可点击，有光圈动画 | P0 | ⬜ |
| MP-005 | 顶部状态栏 | 1. 查看顶部状态栏 | 显示 Buddy 头像、魔力值、等级 | P0 | ⬜ |
| MP-006 | 底部导航栏 | 1. 查看底部导航 | 显示 Map/Scroll 导航按钮 | P0 | ⬜ |

### 3.2 地图交互

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| MP-007 | 地图滑动 | 1. 手指上下滑动地图 | 地图可平滑滚动 | P0 | ⬜ |
| MP-008 | 触摸边界限制 | 1. 尝试滑动超出地图边界 | 有边界回弹效果 | P1 | ⬜ |
| MP-009 | 点击已解锁节点 | 1. 点击已解锁的节点 | 弹出节点预览模态框 | P0 | ⬜ |
| MP-010 | 点击未解锁节点 | 1. 点击未解锁的节点 | 显示锁定提示，不可进入 | P0 | ⬜ |
| MP-011 | 当前节点光圈 | 1. 观察当前可进入的节点 | 有脉冲光圈动画 (pulse) | P1 | ⬜ |

### 3.3 节点预览

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| MP-012 | 预览内容完整 | 1. 点击节点打开预览 | 显示故事标题、难度、预计时间 | P0 | ⬜ |
| MP-013 | 进入阅读按钮 | 1. 在预览中点击 "Enter" | 跳转到阅读器页面 | P0 | ⬜ |
| MP-014 | 关闭预览 | 1. 点击预览外部区域 | 预览模态框关闭 | P1 | ⬜ |
| MP-015 | 完成状态显示 | 1. 完成一个故事后<br>2. 查看该节点 | 节点显示已完成标记 (金星) | P0 | ⬜ |

### 3.4 节点解锁逻辑

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| MP-016 | 完成故事解锁下一节点 | 1. 完成当前故事的 Quiz<br>2. 返回地图 | 下一个节点自动解锁，迷雾消散 | P0 | ⬜ |
| MP-017 | 迷雾消散动画 | 1. 解锁新节点 | 迷雾有渐变消散动画 | P1 | ⬜ |
| MP-018 | 解锁记录持久化 | 1. 解锁新节点<br>2. 刷新页面 | 已解锁状态保持 | P0 | ⬜ |
| MP-019 | 线性解锁规则 | 1. 尝试跳过中间节点 | 不允许，必须按顺序解锁 | P0 | ⬜ |

---

## 4. 阅读器模块测试

### 4.1 阅读器基础功能

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| RD-001 | 阅读器页面加载 | 1. 从地图进入故事 | 显示故事内容、控制栏、Buddy | P0 | ⬜ |
| RD-002 | 故事内容显示 | 1. 查看故事文本 | 显示英文原文，大字号清晰可读 | P0 | ⬜ |
| RD-003 | 插图显示 | 1. 查看故事顶部 | 显示故事封面/插图 | P1 | ⬜ |
| RD-004 | 返回地图 | 1. 点击返回按钮 | 返回地图页面 | P0 | ⬜ |
| RD-005 | 翻页/滚动 | 1. 上下滑动 | 可查看完整故事内容 | P0 | ⬜ |

### 4.2 TTS 语音朗读

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| RD-006 | 播放朗读 | 1. 点击播放按钮 | TTS 开始朗读故事 | P0 | ⬜ |
| RD-007 | 暂停朗读 | 1. 播放中点击暂停 | 朗读暂停，按钮变为播放 | P0 | ⬜ |
| RD-008 | 继续朗读 | 1. 暂停后点击播放 | 从暂停位置继续朗读 | P0 | ⬜ |
| RD-009 | 语速 0.8x | 1. 切换语速到 0.8x<br>2. 播放 | 朗读速度变慢 | P0 | ⬜ |
| RD-010 | 语速 1.0x | 1. 切换语速到 1.0x<br>2. 播放 | 正常朗读速度 | P0 | ⬜ |
| RD-011 | 语速 1.2x | 1. 切换语速到 1.2x<br>2. 播放 | 朗读速度变快 | P0 | ⬜ |
| RD-012 | 朗读完成 | 1. 等待朗读结束 | 播放状态重置，可重新播放 | P1 | ⬜ |

### 4.3 单词高亮同步 (Follow-the-Light)

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| RD-013 | 朗读时单词高亮 | 1. 播放朗读<br>2. 观察文本 | 当前朗读单词背景高亮 (黄色) | P0 | ⬜ |
| RD-014 | 高亮同步准确性 | 1. 播放朗读<br>2. 对比声音和高亮 | 高亮与声音基本同步 | P0 | ⬜ |
| RD-015 | 非高亮单词变淡 | 1. 播放朗读 | 未朗读的单词透明度降低 | P1 | ⬜ |
| RD-016 | 高亮缩放效果 | 1. 播放朗读 | 当前单词有轻微放大效果 | P2 | ⬜ |

### 4.4 单词点击发音

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| RD-017 | 点击单词发音 | 1. 点击任意单词 | 该单词被单独朗读 | P0 | ⬜ |
| RD-018 | 点击时高亮 | 1. 点击单词 | 点击的单词短暂高亮 | P1 | ⬜ |
| RD-019 | 连续点击不同单词 | 1. 快速点击多个单词 | 依次朗读，不卡顿 | P1 | ⬜ |
| RD-020 | 暂停时点击发音 | 1. 暂停朗读<br>2. 点击单词 | 可正常发音，不影响暂停状态 | P1 | ⬜ |

### 4.5 查词功能 (DictionaryPopup)

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| RD-021 | 长按单词弹出字典 | 1. 长按任意单词 (500ms+) | 弹出字典弹窗 | P0 | ⬜ |
| RD-022 | 字典内容完整 | 1. 长按查词 | 显示: 单词、音标、释义、emoji | P0 | ⬜ |
| RD-023 | 字典发音按钮 | 1. 在字典弹窗点击发音 | 朗读该单词 | P0 | ⬜ |
| RD-024 | 关闭字典弹窗 | 1. 点击弹窗外部 | 字典弹窗关闭 | P0 | ⬜ |
| RD-025 | 未收录单词 | 1. 长按未收录的单词 | 显示 "未收录" 提示 | P1 | ⬜ |
| RD-026 | 复合词处理 | 1. 长按 "it's" 等缩写 | 正确识别并查询 | P2 | ⬜ |

### 4.6 影子跟读 (Shadowing)

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| RD-027 | 进入 Echo 模式 | 1. 点击跟读按钮 | 进入影子跟读界面 | P0 | ⬜ |
| RD-028 | 系统播放示范 | 1. 在 Echo 模式<br>2. 点击播放 | 系统播放当前句子 | P0 | ⬜ |
| RD-029 | 录音功能 | 1. 示范播放完成<br>2. 点击录音 | 开始录制用户声音 | P0 | ⬜ |
| RD-030 | 停止录音 | 1. 录音中点击停止 | 录音结束，显示波形 | P0 | ⬜ |
| RD-031 | 播放录音 | 1. 录音完成<br>2. 点击播放我的声音 | 播放用户录音 | P0 | ⬜ |
| RD-032 | 波形对比显示 | 1. 完成录音 | 显示原声和录音的波形对比 | P1 | ⬜ |
| RD-033 | 双声轨切换 | 1. 完成录音<br>2. 切换播放 | 可分别播放原声和录音 | P1 | ⬜ |
| RD-034 | 重新录制 | 1. 点击重录按钮 | 清除当前录音，重新开始 | P1 | ⬜ |
| RD-035 | 麦克风权限请求 | 1. 首次使用录音 | 弹出麦克风权限请求 | P0 | ⬜ |
| RD-036 | 权限拒绝处理 | 1. 拒绝麦克风权限 | 显示权限提示，引导开启 | P1 | ⬜ |

### 4.7 阅读进度

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| RD-037 | 进度自动保存 | 1. 阅读到一半<br>2. 退出 | 阅读进度保存到 IndexedDB | P0 | ⬜ |
| RD-038 | 进度恢复 | 1. 重新进入同一故事 | 从上次位置继续 | P1 | ⬜ |
| RD-039 | 完成阅读跳转 | 1. 阅读完整个故事<br>2. 点击继续 | 跳转到 Quiz 页面 | P0 | ⬜ |

---

## 5. Quiz 练习系统测试

### 5.1 Quiz 基础功能

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| QZ-001 | Quiz 页面加载 | 1. 从阅读器进入 Quiz | 显示 Quiz 界面、进度条 | P0 | ⬜ |
| QZ-002 | 进度指示器 | 1. 查看顶部进度 | 显示当前题号 / 总题数 | P0 | ⬜ |
| QZ-003 | 魔力球指示器 | 1. 查看进度区域 | 显示魔力球，答对亮起 | P1 | ⬜ |
| QZ-004 | 退出 Quiz 确认 | 1. 答题中点击返回 | 弹出确认退出对话框 | P1 | ⬜ |

### 5.2 听音辨图题型 (ImageChoice)

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| QZ-005 | 题目显示 | 1. 进入听音辨图题 | 显示 3 个图片选项 | P0 | ⬜ |
| QZ-006 | 播放题目音频 | 1. 自动播放或点击播放 | 播放单词发音 | P0 | ⬜ |
| QZ-007 | 选择正确答案 | 1. 点击正确的图片 | 图片边框变绿，显示 ✓ | P0 | ⬜ |
| QZ-008 | 选择错误答案 | 1. 点击错误的图片 | 图片边框变红，显示正确答案 | P0 | ⬜ |
| QZ-009 | 正确音效 | 1. 选择正确答案 | 播放 "Ding" 成功音效 | P1 | ⬜ |
| QZ-010 | 错误音效 | 1. 选择错误答案 | 播放错误音效 | P1 | ⬜ |

### 5.3 单词拼装题型 (WordBuilder)

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| QZ-011 | 题目显示 | 1. 进入单词拼装题 | 显示图片提示、打乱的字母 | P0 | ⬜ |
| QZ-012 | 点击字母选择 | 1. 点击字母 | 字母移动到答案区 | P0 | ⬜ |
| QZ-013 | 点击移除字母 | 1. 点击答案区的字母 | 字母返回选项区 | P0 | ⬜ |
| QZ-014 | 完成正确拼写 | 1. 按正确顺序选择字母 | 自动判断正确，显示成功反馈 | P0 | ⬜ |
| QZ-015 | 错误拼写反馈 | 1. 拼写错误后提交 | 显示正确答案 | P0 | ⬜ |

### 5.4 句子排序题型 (SentenceOrder)

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| QZ-016 | 题目显示 | 1. 进入句子排序题 | 显示打乱的单词块 | P0 | ⬜ |
| QZ-017 | 拖拽单词 | 1. 拖拽单词到目标位置 | 单词可被拖动，有视觉反馈 | P0 | ⬜ |
| QZ-018 | 放置单词 | 1. 释放拖拽的单词 | 单词吸附到目标位置 | P0 | ⬜ |
| QZ-019 | 点击选择单词 | 1. 点击单词 | 单词移动到答案区 | P0 | ⬜ |
| QZ-020 | 正确排序判定 | 1. 排列正确顺序 | 自动判断，显示成功 | P0 | ⬜ |
| QZ-021 | 错误排序反馈 | 1. 排列错误顺序<br>2. 提交 | 单词弹回原位（橡皮筋效果） | P0 | ⬜ |
| QZ-022 | 触摸拖拽兼容 | 1. 在触摸屏使用拖拽 | 触摸拖拽正常工作 | P0 | ⬜ |

### 5.5 Quiz 结果与奖励

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| QZ-023 | Quiz 完成跳转 | 1. 完成所有题目 | 显示结果页面 | P0 | ⬜ |
| QZ-024 | 结果统计显示 | 1. 查看结果页 | 显示正确数、获得魔力值 | P0 | ⬜ |
| QZ-025 | 全对额外奖励 | 1. 全部答对 | 显示 "完美!" 特效，额外奖励 | P0 | ⬜ |
| QZ-026 | 魔力值增加 | 1. 完成 Quiz | 用户魔力值正确增加 | P0 | ⬜ |
| QZ-027 | 返回地图 | 1. 结果页点击继续 | 返回地图，节点解锁 | P0 | ⬜ |
| QZ-028 | Quiz 数据存储 | 1. 完成 Quiz<br>2. 检查 IndexedDB | quizHistory 表有记录 | P0 | ⬜ |

### 5.6 提示功能

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| QZ-029 | 显示提示按钮 | 1. 在题目中查看 | 显示 "提示 (-5 MP)" 按钮 | P1 | ⬜ |
| QZ-030 | 使用提示 | 1. 点击提示按钮 | 显示提示内容，扣除魔力值 | P1 | ⬜ |
| QZ-031 | 魔力不足提示 | 1. 魔力值 < 5 时点击提示 | 显示魔力不足提示 | P1 | ⬜ |

---

## 6. Buddy 养成系统测试

### 6.1 Buddy 显示

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| BD-001 | 地图页 Buddy 显示 | 1. 进入地图页 | 顶部显示 Buddy 头像 | P0 | ⬜ |
| BD-002 | 阅读器 Buddy 显示 | 1. 进入阅读器 | 右下角显示悬浮 Buddy | P0 | ⬜ |
| BD-003 | Buddy 动画播放 | 1. 观察 Buddy | Buddy 有待机动画 | P1 | ⬜ |

### 6.2 Buddy 形态进化

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| BD-004 | 形态 I 显示 | 1. 新用户<br>2. 查看 Buddy | 显示语言之卵形态 | P0 | ⬜ |
| BD-005 | 形态 II 进化 | 1. 魔力值达到 500<br>2. 触发进化 | 进化为萌芽幼兽形态 | P0 | ⬜ |
| BD-006 | 形态 III 进化 | 1. 魔力值达到 2000 | 进化为守护精灵形态 | P0 | ⬜ |
| BD-007 | 形态 IV 进化 | 1. 魔力值达到 5000 | 进化为博学贤者形态 | P0 | ⬜ |
| BD-008 | 进化仪式动画 | 1. 触发进化 | 播放进化仪式动画 | P0 | ⬜ |
| BD-009 | 进化状态持久化 | 1. 进化后刷新页面 | 保持新形态 | P0 | ⬜ |

### 6.3 Buddy 心情系统

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| BD-010 | 正常心情 | 1. 正常学习 | Buddy 显示 neutral/happy 状态 | P0 | ⬜ |
| BD-011 | 开心心情 | 1. 连续学习 3 天+ | Buddy 显示 happy 状态 | P1 | ⬜ |
| BD-012 | 兴奋心情 | 1. 连续学习 7 天+ | Buddy 显示 excited 状态 | P1 | ⬜ |
| BD-013 | 伤心心情 | 1. 超过 1 天未登录 | Buddy 显示 sad 状态 | P1 | ⬜ |
| BD-014 | 饥饿心情 | 1. 超过 2 天未登录 | Buddy 显示 hungry 状态 | P1 | ⬜ |

### 6.4 魔力值系统

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| BD-015 | 阅读获得魔力 | 1. 完成故事阅读 | +10 魔力值 | P0 | ⬜ |
| BD-016 | Quiz 答对获得魔力 | 1. Quiz 答对一题 | +5 魔力值 | P0 | ⬜ |
| BD-017 | Quiz 全对奖励 | 1. Quiz 全部答对 | +20 额外魔力值 | P0 | ⬜ |
| BD-018 | 连续学习奖励 | 1. 连续学习多天 | 额外魔力值奖励 | P1 | ⬜ |
| BD-019 | 魔力值显示更新 | 1. 获得魔力值 | 状态栏魔力值实时更新 | P0 | ⬜ |
| BD-020 | 魔力值持久化 | 1. 获得魔力值<br>2. 刷新页面 | 魔力值保持 | P0 | ⬜ |

---

## 7. 激励系统测试

### 7.1 卡牌收集

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| CD-001 | 获得卡牌 | 1. 完成 Quiz | 获得相关单词卡牌 | P0 | ⬜ |
| CD-002 | 卡牌稀有度 - 普通 | 1. 查看获得的卡牌 | 连续答对 < 4 次为白色普通卡 | P1 | ⬜ |
| CD-003 | 卡牌稀有度 - 稀有 | 1. 连续答对 4-6 次 | 获得绿色稀有卡 | P1 | ⬜ |
| CD-004 | 卡牌稀有度 - 史诗 | 1. 连续答对 7-9 次 | 获得蓝色史诗卡 | P1 | ⬜ |
| CD-005 | 卡牌稀有度 - 传说 | 1. 连续答对 10+ 次 | 获得金色传说卡 | P1 | ⬜ |
| CD-006 | 卡牌获取动画 | 1. 获得新卡牌 | 播放卡牌揭示动画 | P1 | ⬜ |
| CD-007 | 卡牌图鉴页面 | 1. 进入图鉴页 | 显示已收集的卡牌 | P0 | ⬜ |
| CD-008 | 收集进度显示 | 1. 查看图鉴 | 显示收集进度 (已收集/总数) | P1 | ⬜ |
| CD-009 | 未收集卡牌显示 | 1. 查看图鉴 | 未收集卡牌显示为暗色/问号 | P1 | ⬜ |

### 7.2 成就系统

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| AC-001 | 首次冒险成就 | 1. 完成第一个故事 | 解锁 "初次冒险" 成就 | P0 | ⬜ |
| AC-002 | 小书虫成就 | 1. 完成 10 个故事 | 解锁 "小书虫" 成就 | P0 | ⬜ |
| AC-003 | 词汇新星成就 | 1. 学习 100 个单词 | 解锁 "词汇新星" 成就 | P0 | ⬜ |
| AC-004 | 完美答题成就 | 1. Quiz 全对 | 解锁 "完美答题" 成就 | P0 | ⬜ |
| AC-005 | 连续学习成就 | 1. 连续学习 7 天 | 解锁 "一周坚持" 成就 | P1 | ⬜ |
| AC-006 | 伙伴成长成就 | 1. Buddy 进化到形态 II | 解锁 "伙伴成长" 成就 | P0 | ⬜ |
| AC-007 | 成就解锁通知 | 1. 触发成就 | 弹出成就解锁通知 | P0 | ⬜ |
| AC-008 | 成就页面显示 | 1. 进入成就页 | 显示所有成就及状态 | P0 | ⬜ |
| AC-009 | 成就分类显示 | 1. 查看成就页 | 按类别分组显示成就 | P1 | ⬜ |

---

## 8. 守护者卷轴测试

### 8.1 卷轴页面

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| SC-001 | 卷轴页面入口 | 1. 点击底部 Scroll 导航 | 进入守护者卷轴页面 | P0 | ⬜ |
| SC-002 | 个人信息显示 | 1. 查看卷轴页 | 显示用户名称、Buddy 名称、等级 | P0 | ⬜ |
| SC-003 | 学习数据展示 | 1. 查看卷轴页 | 显示已读故事数、词汇量、学习时长 | P0 | ⬜ |
| SC-004 | 成就展示 | 1. 查看卷轴页 | 显示已获得的成就 | P0 | ⬜ |
| SC-005 | 卡牌统计 | 1. 查看卷轴页 | 显示卡牌收集进度 | P1 | ⬜ |

### 8.2 二维码同步

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| SC-006 | 生成二维码 | 1. 在卷轴页点击生成二维码 | 显示包含进度数据的二维码 | P0 | ⬜ |
| SC-007 | 二维码数据完整 | 1. 扫描二维码<br>2. 解码数据 | 包含: 等级、魔力值、故事数、词汇数 | P0 | ⬜ |
| SC-008 | 二维码可扫描 | 1. 使用扫描器扫描 | 可被正常扫描识别 | P0 | ⬜ |
| SC-009 | 数据压缩有效 | 1. 检查二维码数据量 | 数据量在二维码容量范围内 (< 300 字符) | P1 | ⬜ |
| SC-010 | 离线生成二维码 | 1. 断网<br>2. 生成二维码 | 可正常生成 | P0 | ⬜ |

### 8.3 证书导出

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| SC-011 | 证书预览 | 1. 点击证书按钮 | 显示证书预览 | P0 | ⬜ |
| SC-012 | 证书内容完整 | 1. 查看证书 | 包含: 名称、等级、数据统计、日期 | P0 | ⬜ |
| SC-013 | 导出为图片 | 1. 点击保存图片 | 证书保存为 PNG 图片 | P0 | ⬜ |
| SC-014 | 打印功能 | 1. 点击打印 | 调用系统打印功能 | P1 | ⬜ |
| SC-015 | 证书样式美观 | 1. 查看证书 | 设计精美，适合展示/打印 | P1 | ⬜ |
| SC-016 | 离线导出证书 | 1. 断网<br>2. 导出证书 | 可正常导出 | P0 | ⬜ |

---

## 9. 离线功能测试

### 9.1 PWA 安装

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| OF-001 | PWA 安装提示 | 1. 首次访问网站 | 显示 "添加到主屏幕" 提示 | P1 | ⬜ |
| OF-002 | 安装到主屏幕 | 1. 点击安装 | 应用图标出现在主屏幕 | P1 | ⬜ |
| OF-003 | 从主屏幕启动 | 1. 点击主屏幕图标 | 以全屏模式打开应用 | P1 | ⬜ |
| OF-004 | manifest 正确 | 1. 检查 manifest.json | 名称、图标、颜色配置正确 | P0 | ⬜ |

### 9.2 Service Worker 缓存

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| OF-005 | SW 注册成功 | 1. 打开开发者工具<br>2. 查看 Application → Service Workers | SW 状态为 activated | P0 | ⬜ |
| OF-006 | 静态资源缓存 | 1. 查看 Cache Storage | JS/CSS/HTML 已缓存 | P0 | ⬜ |
| OF-007 | 故事数据缓存 | 1. 浏览几个故事<br>2. 查看缓存 | 故事 JSON 已缓存 | P0 | ⬜ |
| OF-008 | 图片资源缓存 | 1. 浏览页面<br>2. 查看缓存 | 图片资源已缓存 | P1 | ⬜ |

### 9.3 离线访问

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| OF-009 | 完全离线启动 | 1. 断网<br>2. 打开应用 | 应用正常加载 | P0 | ⬜ |
| OF-010 | 离线阅读故事 | 1. 断网<br>2. 进入已缓存的故事 | 故事内容正常显示 | P0 | ⬜ |
| OF-011 | 离线 TTS | 1. 断网<br>2. 使用 TTS 功能 | 本地 TTS 正常工作 | P0 | ⬜ |
| OF-012 | 离线查词 | 1. 断网<br>2. 长按单词查词 | 字典功能正常 | P0 | ⬜ |
| OF-013 | 离线完成 Quiz | 1. 断网<br>2. 完成 Quiz | Quiz 功能正常，数据保存 | P0 | ⬜ |
| OF-014 | 离线进度保存 | 1. 离线学习<br>2. 检查 IndexedDB | 所有进度正确保存 | P0 | ⬜ |
| OF-015 | 网络恢复处理 | 1. 离线学习<br>2. 恢复网络 | 应用正常继续，无报错 | P1 | ⬜ |

### 9.4 数据持久化

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| OF-016 | IndexedDB 创建 | 1. 首次启动<br>2. 检查 IndexedDB | MagicEnglishBuddy 数据库已创建 | P0 | ⬜ |
| OF-017 | 数据表完整 | 1. 查看 IndexedDB | 包含所有必需的表 | P0 | ⬜ |
| OF-018 | 数据恢复 | 1. 学习一段时间<br>2. 关闭应用<br>3. 重新打开 | 所有数据正确恢复 | P0 | ⬜ |
| OF-019 | 浏览器重启恢复 | 1. 关闭浏览器<br>2. 重新打开应用 | 数据保持完整 | P0 | ⬜ |
| OF-020 | 设备重启恢复 | 1. 重启设备<br>2. 打开应用 | 数据保持完整 | P0 | ⬜ |

---

## 10. 性能测试

### 10.1 加载性能

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| PF-001 | 首屏加载时间 | 1. 清除缓存<br>2. 刷新页面<br>3. 测量加载时间 | < 3 秒 (快速网络) | P0 | ⬜ |
| PF-002 | 缓存后加载 | 1. 第二次访问<br>2. 测量加载时间 | < 1 秒 | P0 | ⬜ |
| PF-003 | 页面切换速度 | 1. 在页面间切换<br>2. 测量响应时间 | < 300ms | P0 | ⬜ |
| PF-004 | 故事加载速度 | 1. 进入故事页面<br>2. 测量加载时间 | < 1 秒 | P0 | ⬜ |

### 10.2 渲染性能

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| PF-005 | 动画流畅度 | 1. 观察各种动画<br>2. 使用 Performance 面板 | 帧率 > 30fps | P0 | ⬜ |
| PF-006 | 滚动流畅度 | 1. 在地图页滚动<br>2. 观察流畅度 | 无卡顿感 | P0 | ⬜ |
| PF-007 | 拖拽流畅度 | 1. Quiz 拖拽题目<br>2. 观察响应 | 拖拽跟手，无延迟 | P0 | ⬜ |
| PF-008 | TTS 高亮同步 | 1. 播放 TTS<br>2. 观察高亮 | 延迟 < 100ms | P0 | ⬜ |

### 10.3 内存与资源

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| PF-009 | 内存占用 | 1. 正常使用应用<br>2. 查看内存使用 | < 200MB | P1 | ⬜ |
| PF-010 | 内存泄漏检测 | 1. 长时间使用应用<br>2. 监控内存 | 无持续增长 | P1 | ⬜ |
| PF-011 | 构建产物大小 | 1. 检查 dist 文件夹 | 总大小 < 15MB | P1 | ⬜ |
| PF-012 | 初始 JS 大小 | 1. 检查主 JS bundle | < 500KB (gzipped) | P1 | ⬜ |

### 10.4 低端设备性能

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| PF-013 | 低端设备加载 | 1. 在 2GB RAM 设备测试 | 可正常加载 | P0 | ⬜ |
| PF-014 | 低端设备动画 | 1. 观察动画效果 | 动画可接受，无严重卡顿 | P0 | ⬜ |
| PF-015 | 动画降级 | 1. 低端设备检测 | 复杂动画自动降级/禁用 | P1 | ⬜ |
| PF-016 | 低端设备 Quiz | 1. 在低端设备完成 Quiz | 拖拽功能正常 | P0 | ⬜ |

---

## 11. 兼容性测试

### 11.1 浏览器兼容性

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| CP-001 | Chrome 80+ | 1. 在 Chrome 测试全部功能 | 全部功能正常 | P0 | ⬜ |
| CP-002 | Safari 14+ | 1. 在 Safari 测试全部功能 | 全部功能正常 | P0 | ⬜ |
| CP-003 | Firefox 80+ | 1. 在 Firefox 测试全部功能 | 全部功能正常 | P1 | ⬜ |
| CP-004 | Android WebView | 1. 在 Android WebView 测试 | 全部功能正常 | P0 | ⬜ |
| CP-005 | iOS Safari | 1. 在 iOS Safari 测试 | 全部功能正常 | P0 | ⬜ |

### 11.2 API 兼容性

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| CP-006 | TTS 支持检测 | 1. 在不支持 TTS 的浏览器 | 显示降级提示 | P0 | ⬜ |
| CP-007 | 录音支持检测 | 1. 在不支持录音的浏览器 | 隐藏录音功能，显示提示 | P0 | ⬜ |
| CP-008 | IndexedDB 支持 | 1. 在不支持 IndexedDB 的浏览器 | 显示浏览器不支持提示 | P0 | ⬜ |
| CP-009 | 震动 API 降级 | 1. 在不支持震动的设备 | 静默失败，不报错 | P2 | ⬜ |

### 11.3 屏幕适配

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| CP-010 | 手机竖屏 | 1. 在手机竖屏模式查看 | 布局正常，无溢出 | P0 | ⬜ |
| CP-011 | 平板竖屏 | 1. 在平板竖屏模式查看 | 布局正常，内容适配 | P0 | ⬜ |
| CP-012 | 小屏幕 (320px) | 1. 在 320px 宽屏幕查看 | 布局正常，可操作 | P1 | ⬜ |
| CP-013 | 大屏幕 (768px+) | 1. 在大屏幕查看 | 布局合理，不过分拉伸 | P1 | ⬜ |

---

## 12. 安全与边界测试

### 12.1 输入安全

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| SE-001 | XSS 防护 - 名字输入 | 1. 输入 `<script>alert(1)</script>` | 内容被转义，无执行 | P0 | ⬜ |
| SE-002 | HTML 注入防护 | 1. 输入 `<img src=x onerror=alert(1)>` | 内容被转义 | P0 | ⬜ |
| SE-003 | 超长输入处理 | 1. 输入 10000 字符 | 被截断，不崩溃 | P1 | ⬜ |

### 12.2 边界条件

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| SE-004 | 空故事数据 | 1. 删除故事数据<br>2. 进入地图 | 显示空状态提示 | P1 | ⬜ |
| SE-005 | 空词典数据 | 1. 删除词典数据<br>2. 长按查词 | 显示 "数据加载中" 或 "未收录" | P1 | ⬜ |
| SE-006 | 存储空间满 | 1. 模拟存储空间不足 | 显示存储空间警告 | P2 | ⬜ |
| SE-007 | 快速连续操作 | 1. 快速连续点击按钮 | 无重复触发，无崩溃 | P1 | ⬜ |
| SE-008 | 并发数据操作 | 1. 同时进行多个操作 | 数据一致性保持 | P1 | ⬜ |

### 12.3 异常处理

| 用例 ID | 测试场景 | 测试步骤 | 预期结果 | 优先级 | 状态 |
|--------|---------|---------|---------|--------|------|
| SE-009 | TTS 加载失败 | 1. 模拟 TTS 加载失败 | 显示错误提示，不崩溃 | P1 | ⬜ |
| SE-010 | 录音失败处理 | 1. 录音过程中拔出麦克风 | 优雅处理，显示提示 | P1 | ⬜ |
| SE-011 | 数据库写入失败 | 1. 模拟 IndexedDB 写入失败 | 显示错误提示，不丢失数据 | P1 | ⬜ |
| SE-012 | 图片加载失败 | 1. 模拟图片 404 | 显示占位图或默认图 | P2 | ⬜ |

---

## 13. 回归测试清单

### 13.1 核心功能检查清单 (每次发布必测)

| 序号 | 功能 | 测试要点 | 状态 |
|------|------|----------|------|
| 1 | 新手引导 | 孵化动画 → 起名 → 进入地图 | ⬜ |
| 2 | 地图导航 | 节点显示 → 点击预览 → 进入故事 | ⬜ |
| 3 | 阅读器 | TTS 播放 → 高亮同步 → 查词 | ⬜ |
| 4 | Quiz | 3 种题型 → 答题反馈 → 结果统计 | ⬜ |
| 5 | Buddy | 形态显示 → 进化 → 心情 | ⬜ |
| 6 | 节点解锁 | 完成 Quiz → 返回地图 → 下一节点解锁 | ⬜ |
| 7 | 魔力值 | 获得 → 显示更新 → 持久化 | ⬜ |
| 8 | 离线功能 | 断网 → 正常使用 → 数据保存 | ⬜ |
| 9 | 守护者卷轴 | 数据显示 → 二维码生成 → 证书导出 | ⬜ |
| 10 | 数据持久化 | 刷新页面 → 数据保持 | ⬜ |

### 13.2 烟雾测试 (快速验证)

```
1. 打开应用 → 正常显示
2. 完成引导流程 → 进入地图
3. 点击第一个节点 → 进入阅读
4. 播放 TTS → 高亮正常
5. 完成阅读 → 进入 Quiz
6. 完成 Quiz → 获得奖励
7. 返回地图 → 节点解锁
8. 进入卷轴页 → 数据显示正确
9. 断网 → 功能正常
10. 刷新页面 → 数据保持
```

### 13.3 测试报告模板

```markdown
## 测试报告

**测试日期**: YYYY-MM-DD
**测试版本**: vX.X.X
**测试人员**: XXX

### 测试环境
- 设备: 
- 浏览器: 
- 操作系统: 

### 测试结果摘要
- 通过用例: XX / XX
- 失败用例: XX
- 阻塞问题: XX

### 失败用例详情
| 用例 ID | 描述 | 实际结果 | 备注 |
|---------|------|----------|------|
| | | | |

### 发现的 Bug
| Bug ID | 描述 | 严重程度 | 状态 |
|--------|------|----------|------|
| | | P0/P1/P2 | |

### 建议
- 

### 结论
[ ] 可以发布
[ ] 需要修复后再发布
[ ] 阻塞发布
```

---

## 附录

### A. 测试数据

**测试故事 ID 列表**:
- l1_001 - The Magic Apple
- l1_002 - Hello, Friend
- l1_003 - Colors Around Me
- ...

**测试单词列表**:
- apple, red, green, blue, cat, dog, hello, friend...

### B. 常用测试命令

```bash
# 启动开发服务器
pnpm dev

# 构建生产版本
pnpm build

# 本地预览生产版本
pnpm preview

# 清除 IndexedDB (浏览器控制台)
indexedDB.deleteDatabase('MagicEnglishBuddy')
```

### C. 参考链接

- PRD 文档: [prd.md](./prd.md)
- 技术设计: [technical-design.md](./technical-design.md)
- UX 设计: [ux.md](./ux.md)
- 开发路线图: [implementation-roadmap.md](./implementation-roadmap.md)

---

**文档版本**: v1.0  
**最后更新**: 2025-12-27  
**负责人**: 测试团队

